<svg id="demographics-barcode-chart" width="{{ width }}" height="{{ height }}" viewBox="0 0 {{ width }} {{ height }}" preserveAspectRatio="xMinYMin" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">

<g class="stateTicks" transform="translate({{margin.left}},16)">
  {% for stateTickVal in stateTicks %}
    <line stroke="#000" stroke-width="2.5px" stroke-opacity="0.2" x1="{{ stateTickVal }}" x2="{{ stateTickVal }}" y1="{{ margin.top }}" y2="{{ height - margin.bottom - 20 }}"></line>
  {% endfor %}
</g>

<g class="highlight" transform="translate({{margin.left}},16)">
  {# highlight tick pink #}
  <line stroke="#FF21AA" stroke-width="2.5px" stroke-opacity="1" x1="{{ highlight.position }}" x2="{{ highlight.position }}" y1="{{ margin.top }}" y2="{{ height - margin.bottom - 20 }}"></line>
  
  {# label the highlight with state name and val #}
  <line stroke="#000" x1="{{ highlight.position }}" x2="{{ highlight.position }}" y1="{{ margin.top - 5}}" y2="{{ margin.top - 20 }}"></line>
  <line stroke="#000" x1="{{ highlight.position }}" x2="{% if highlight.textDirection == 'start' %}{{ highlight.position + 10 }}{% else %}{{ highlight.position - 10 }}{% endif %}" y1="{{ margin.top - 20 }}" y2="{{ margin.top - 20 }}"></line>
  <text text-anchor="{{ highlight.textDirection }}" transform="translate({% if highlight.textDirection == 'start' %}{{ highlight.position + 15 }}{% else %}{{ highlight.position - 15 }}{% endif %}, {{ margin.top - 32 }})">
    <tspan x="0">{{ highlight.value }}</tspan>
    <tspan x="0" dy="1em">{{ stateName }}</tspan>
  </text>
</g>

<g class="xAxis" transform="translate({{margin.left}},{{ height - (margin.bottom) }})" fill="none" font-family="sans-serif" text-anchor="middle">
  <line class="domain" stroke="#55514A" x1="0" x2="{{ width - (margin.left+margin.right) }}" y1="0.5" y2="0.5"></line>
  {% for xTick in xTicks %}
    <g class="tick" transform="translate( {{ xTick.position }}, 0)">
      <line stroke="#55514A" y2="16" x1="0.5" x2="0.5"></line>
      <text fill="#6b6e68" y="2" x="0" dy="1em" text-anchor="middle" transform="translate(0, 16)">
        <tspan x="0" text-anchor="middle" font-size="14px">{{ xTick.value }}</tspan><tspan x="0" dy="1.2em" text-anchor="middle" font-size="12px">{{ xTick.label }}</tspan>
      </text>
    </g>
  {% endfor %}
</g>

</svg>