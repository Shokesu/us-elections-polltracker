{# "who won here" template for state pages #}

<style>
/**
 * Who Won Here? styles
 */
.article-figure__heading--state-winners-table {
  margin-bottom: 0.75em; /* Needed due to lack of subhead */
}

.state-winners-table {
  width: 100%;
  border-spacing: 0;
}

.state-winners-table th {
  font-size: 0.875em;
  min-width: auto;
  -webkit-font-smoothing: antialiased;
}

.state-winners-table td {
  border-bottom: 1px solid #CEC6B9;
  font-size: 1.06em;
  -webkit-font-smoothing: antialiased;
}

.state-winners-table__empty {
  border-bottom: 0;
}

.state-winners-table__primary-header th {
  text-transform: uppercase;
  text-align: left;
  border-bottom: 0;
  font-weight: 500;
  color: black;
  padding-left: 0.5em;
}

.state-winners-table__primary-header th:nth-child(2) {
  border-right: 1px solid #777;
}

.state-winners-table__secondary-header th {
  font-weight: normal;
  text-transform: uppercase;
  border-bottom: 1px solid #777;
  padding-bottom: 0.4em;
}

.state-winners-table__secondary-header th:first-child {
  text-align: left;
  padding-left: 0;
}

.state-winners-table__secondary-header th:nth-child(2) {
  border-right: 1px solid #777;
}

.state-winners-table__secondary-header th:nth-child(2),
.state-winners-table__secondary-header th:nth-child(3) {
  text-align: left;
  padding-left: 0.5em;
}

.state-winners-table tbody tr td:first-child {
  border-right: 1px solid #CEC6B9;
}

.state-winners-table tbody tr td:nth-child(4) {
  border-bottom: 1px solid #CEC6B9;
  border-right: 1px solid #777;
}

.state-winners-table__year {
  width: auto;
  text-align: left;
  padding-left: 0;
  font-weight: normal;
}

tbody .state-winners-table__year {
  color: #777;
}

.state-winners-table__state-winner,
.state-winners-table__federal-winner {
  width: 20%;
  text-align: right;
  padding-right: .5em;
}

/*.state-winners-table__state-winner.dem,
.state-winners-table__federal-winner.dem {
  color: #a2c1e1;
}

.state-winners-table__state-winner.gop,
.state-winners-table__federal-winner.gop {
  color: #f4a098;
}*/


.state-winners-table__winning-pct-state,
.state-winners-table__winning-pct-federal {
  width: 25%;
  padding: 0.3em 0;
}


.state-winners-table__winning-pct-bar {
  height: 1em;
  margin-right: 0.3em;
  float: left;
  background-color: #999;
}

.state-winners-table__winning-pct-bar.gop {
  background-color: #e03d46;
}

.state-winners-table__winning-pct-bar.dem {
  background-color: #579DD5;
}

.state-winners-table__republicans.gop-winner {
  color: #e03d46;
  font-weight: bold;
}

.state-winners-table__dems.dem-winner {
  color: #579DD5;
  font-weight: bold;
}

.state-winners-table__winning-pct-state-figure,
.state-winners-table__winning-pct-federal-figure {
  text-align: right;
}

.state-winners-table__winning-pct-state-figure {
  padding-right: 0.5em;
}

.state-winners-table__winning-pct-federal-figure {
  padding-right: 0;
}
</style>

<div class="article-figure">
  <h2 class="article-figure__heading--state-winners-table">
    Past presidential races in this state
  </h2>

  {% if historicalResults %}
  <table class="state-winners-table">
    <thead>
      <tr class="state-winners-table__primary-header">
        <th class="state-winners-table__empty"></th>
        <th colspan="3">
          {{ state.name }}
        </th>
        <th colspan="3">
          National
        </th>
      </tr>

      <tr class="state-winners-table__secondary-header">
        <th class="state-winners-table__year">
          Year
        </th>
        <th colspan="3">
          Margin of victory (pts)
        </th>
        <th colspan="3">
          Margin of victory (pts)
        </th>
      </tr>
    </thead>
    <tbody>
      {% for row in historicalResults %}
      <tr>
        <td class="state-winners-table__year">
          {{ row.year }}
        </td>

        <td class="state-winners-table__state-winner {{row.stateWinnerColor}}">
          {{ row.winnerState }}
        </td>

        <td class="state-winners-table__winning-pct-state">
          <div style="width: {{ row.winningPctScaledState }}%" class="state-winners-table__winning-pct-bar {{row.stateWinnerColor}}"></div>
        </td>

        <td class="state-winners-table__winning-pct-state-figure">
          {{row.winningPctState | round(1)}}%
        </td>

        <td class="state-winners-table__federal-winner {{row.federalWinnerColor}}">
          {{ row.winnerFederal }}
        </td>

        <td class="state-winners-table__winning-pct-federal">
          <div style="width: {{ row.winningPctScaledFederal }}%" class="state-winners-table__winning-pct-bar {{row.federalWinnerColor}}"></div>
        </td>

        <td class="state-winners-table__winning-pct-federal-figure">
          {{row.winningPctFederal | round(1)}}%
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}

</div>
